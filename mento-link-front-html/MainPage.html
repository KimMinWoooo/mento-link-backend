<!DOCTYPE html>
<html lang="ko">

    <head>
        <meta charset="UTF-8">
        <title>멘토링 메인 페이지</title>
        <link rel="stylesheet" href="MainPage.css">
    </head>

    <body>

        <!-- 언어 선택 + 로그인/회원가입 버튼 -->
        <div style="position: absolute; top: 10px; right: 30px; z-index: 2000;">
            <button id="lang-ko">한글</button>
            <button id="lang-zh">中文</button>
            <button id="loginBtn">로그인</button>
            <button id="registerBtn">회원가입</button>
            <button id="addCohortBtn" style="display:none;">기수 추가</button>
            <button id="addSubjectBtn" style="display:none;">과목 추가</button>
        </div>

        <!-- 1단 -->
        <div class="title">
            <a href="/">
                <img src="images/Mentolinklogo.png" alt="멘토링크 로고" class="logo">
            </a>
            <h5 data-i18n="main_title">숭실대학교 멘토링 페이지</h5>            
        </div>

        <!-- 2단 -->
        <div class="notice">

            <!-- 사진 슬라이드 -->
            <div class="SlideBackground">
                <div class="slide slide1"></div>
                <div class="slide slide2"></div>
                <div class="slide slide3"></div>
                <div class="slide slide4"></div>
            </div>

            <div class="NoticeBox">
                <h2 data-i18n="notice">공지사항</h2>
                <button id="mainNoticeWriteBtn" style="display:none; float:right; margin-bottom:5px;">공지사항 작성</button>
                <ul class="notice-list">
                </ul>

                <div class="ViewMore">
                    <a href="#" data-i18n="view_more">전체보기</a>
                </div>
            </div>

        </div>

        <!--3단-->

        <div class="MentoringSection">
            <div class = "GenSection">
                <div class="generations" id="cohortList">
                    <!-- 기수 목록이 여기에 동적으로 추가됩니다 -->
                </div>
            </div>

            <div class="SubSection">
                <h2 data-i18n="mentoring_board">기수별 멘토링 페이지</h2>

                <div class="SubDetail">
                    <div class="DefaultMessage" data-i18n="select_cohort">기수를 선택해주세요.</div>
                </div>

            </div>

        </div>

        <!-- 공지 모달 -->
        <div id="noticeModal" class="modal">
            <div class="modal-content">
                <span class="close-detail close-btn">&times;</span>
                <h2 class="modal-title">공지 제목</h2>
                <p class="modal-body">공지 내용</p>
            </div>
        </div>
        
        <!-- 공지 목록 모달 -->
        <div id="noticeListModal" class="modal">
            <div class="modal-content">
                <span class="close-list close-btn">&times;</span>
                <h2 class="modal-title">공지사항 목록</h2>
                <ul class="modal-list">
                    <li><a href="#" class="open-notice" data-id="1">공지사항 1</a></li>
                    <li><a href="#" class="open-notice" data-id="2">공지사항 2</a></li>
                </ul>
            </div>
        </div>

        <!-- 로그인 모달 -->
        <div id="loginModal" class="modal" style="display:none;">
            <div class="modal-content">
                <div class = "modal-wrapper">
                    <span class="close-btn" id="closeLogin">&times;</span>
                    <h2>로그인</h2>
                    <form id="loginForm">

                        <div class="form-group">
                            <label for="loginStudentId">학번</label>
                            <input type="text" id="loginStudentId" name="studentId" required placeholder="Student Id">
                        </div>

                        <div class="form-group">
                            <label for="loginPassword">비밀번호</label>
                            <input type="password" id="loginPassword" name="password" required placeholder="Password">
                        </div>
                        <button type="submit">로그인</button>
                    
                    </form>
                </div>
            </div>
        </div>

        <!-- 회원가입 모달 -->
        <div id="registerModal" class="modal" style="display:none;">
            <div class="modal-content">
                <span class="close-btn" id="closeRegister">&times;</span>
                <h2>회원가입</h2>
                <hr/>
                <form id="registerForm">
                <div class="left-column">
                    <div class="form-group">
                    <label for="regStudentId">학번</label>
                    <input type="text" id="regStudentId" name="studentId" required placeholder="Student Id">
                    </div>
                    <div class="form-group">
                    <label for="regName">이름</label>
                    <input type="text" id="regName" name="name" required placeholder="Name">
                    </div>
                    <div class="form-group">
                    <label for="regPhone">전화번호</label>
                    <input type="text" id="regPhone" name="phone" required placeholder="Phone Number">
                    </div>
                </div>

                <div class="right-column">
                    <div class="form-group">
                    <label for="regPassword">비밀번호</label>
                    <input type="password" id="regPassword" name="password" required placeholder="Password">
                    </div>
                    <div class="form-group">
                    <label for="regDepartment">학과</label>
                    <input type="text" id="regDepartment" name="department" required placeholder="Department">
                    </div>
                    <div class="form-group">
                    <label for="regEmail">이메일</label>
                    <input type="email" id="regEmail" name="email" required placeholder="Email">
                    </div>
                </div>
                <button type="submit">회원가입</button>
                </form>
            </div>
        </div>

        <!-- 메인 공지사항 작성 모달 -->
        <div id="mainNoticeModal" class="modal" style="display:none;">
            <div class="modal-content">
                <span class="close-btn" id="closeMainNotice">&times;</span>
                <h2>공지사항 작성</h2>
                <form id="mainNoticeForm">
                    <div class="form-group">
                        <label for="mainNoticeTitle">제목</label>
                        <input type="text" id="mainNoticeTitle" name="title" required placeholder="Title">
                    </div>
                    <div class="form-group">
                        <label for="mainNoticeContent">내용</label>
                        <textarea id="mainNoticeContent" name="content" required placeholder="Content"></textarea>
                    </div>
                    <button type="submit">등록</button>
                </form>
            </div>
        </div>

        <!-- 기수 추가 모달 -->
        <div id="cohortModal" class="modal" style="display:none;">
            <div class="modal-content">
                <span class="close-btn" id="closeCohortModal">&times;</span>
                <h2>기수 추가</h2>
                <hr/>
                <form id="cohortForm" class="two-column-form">
                    <div class="form-column left">
                        <div class="form-group">
                            <label for="cohortNumber">기수 번호</label>
                            <input type="number" id="cohortNumber" name="number" required>
                        </div>
                        <div class="form-group">
                            <label for="cohortStart">시작일</label>
                            <input type="date" id="cohortStart" name="startDate" required>
                        </div>
                        <div class="form-group">
                            <label for="cohortEnd">종료일</label>
                            <input type="date" id="cohortEnd" name="endDate" required>
                        </div>
                    </div>
                    <div class="form-column right">
                        <div class="form-group">
                            <label for="cohortLms">LMS URL</label>
                            <input type="text" id="cohortLms" name="lmsUrl" required placeholder="Url">
                        </div>
                        <div class="form-group">
                            <label for="cohortFun">Fun 시스템 URL</label>
                            <input type="text" id="cohortFun" name="funSystemUrl" required placeholder="Url">
                        </div>
                    </div>
                    <div style="clear: both;"></div>
                    <button type="submit" style="margin-top: 20px;">추가</button>
                </form>
            </div>
        </div>

        
        <!-- 과목 추가 모달 -->
        <div id="subjectModal" class="modal" style="display:none;">
            <div class="modal-content">
                <span class="close-btn" id="closeSubjectModal">&times;</span>
                <h2>과목 추가</h2>
                <hr />
                <form id="subjectForm">
                <div class="left-column">
                    <div class="form-group">
                    <label for="subjectName">과목명</label>
                    <input type="text" id="subjectName" name="name" required placeholder="Subject Name">
                    </div>
                    <div class="form-group">
                    <label for="subjectCode">과목 코드</label>
                    <input type="text" id="subjectCode" name="code" required placeholder="Subject Code">
                    </div>
                    <div class="form-group">
                    <label for="subjectCohort">기수 선택</label>
                    <select id="subjectCohort" name="cohortId" required></select>
                    </div>
                </div>

                <div class="right-column">
                    <div class="form-group">
                    <label for="mentorName">멘토 이름</label>
                    <input type="text" id="mentorName" name="mentorName" required placeholder="Mentor Name">
                    </div>
                    <div class="form-group">
                    <label for="mentorEmail">멘토 이메일</label>
                    <input type="email" id="mentorEmail" name="mentorEmail" required placeholder="Mentor Email">
                    </div>
                    <div class="form-group">
                    <label for="mentorIntro">멘토 소개</label>
                    <input type="text" id="mentorIntro" name="mentorIntro" placeholder="Mentor Introduction">
                    </div>
                </div>

                <button type="submit">추가</button>
                </form>
            </div>
        </div>

        <script src = "MainPage.js"></script>
        <!-- 관리자만 기수/과목 추가 버튼 노출 -->
        <script>
        (function() {
            const cohortBtn = document.getElementById('addCohortBtn');
            const subjectBtn = document.getElementById('addSubjectBtn');
            function updateAdminBtns() {
                const user = localStorage.getItem('user') ? JSON.parse(localStorage.getItem('user')) : null;
                if (user && user.isAdmin) {
                    cohortBtn.style.display = 'inline-block';
                    subjectBtn.style.display = 'inline-block';
                } else {
                    cohortBtn.style.display = 'none';
                    subjectBtn.style.display = 'none';
                }
            }
            updateAdminBtns();
            window.addEventListener('storage', updateAdminBtns);
            // TODO: 버튼 클릭 시 모달/폼 오픈 구현
        })();
        </script>

        <!-- 관리자만 메인 공지사항 작성 버튼 노출 및 모달 제어 -->
        <script>
        (function() {
            const btn = document.getElementById('mainNoticeWriteBtn');
            const modal = document.getElementById('mainNoticeModal');
            const closeBtn = document.getElementById('closeMainNotice');
            function updateBtn() {
                const user = localStorage.getItem('user') ? JSON.parse(localStorage.getItem('user')) : null;
                if (user && user.isAdmin) {
                    btn.style.display = 'inline-block';
                } else {
                    btn.style.display = 'none';
                }
            }
            updateBtn();
            window.addEventListener('storage', updateBtn);
            btn.onclick = function() { modal.style.display = 'flex'; };
            closeBtn.onclick = function() { modal.style.display = 'none'; };
            window.addEventListener('click', function(e) { if (e.target === modal) modal.style.display = 'none'; });
        })();
        </script>
    </body>
</html>
